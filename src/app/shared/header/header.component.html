<header class="site-header" role="banner">
  <div class="container header__inner">
    <button class="nav-toggle" type="button" aria-label="MenÃ¼ Ã¶ffnen" aria-controls="primary-nav"
      [attr.aria-expanded]="open ? 'true' : 'false'" (click)="toggle()">
      <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
      </svg>
    </button>

    <img class="brand" src="assets/LM_Logos/Logo1.png" alt="LeonardsMedia" decoding="async" (click)="routeTo('/')" />

    <nav id="primary-nav" class="nav" [class.open]="open" aria-label="Hauptnavigation">
      <!-- Ã–ffentliche Links -->
      <a (click)="routeTo('/')" routerLink="/" routerLinkActive="is-active"
        [routerLinkActiveOptions]="{ exact: true }">Startseite</a>
      <a (click)="routeTo('/services')" routerLink="/services" routerLinkActive="is-active">Leistungspakete</a>
      <a (click)="routeTo('/faq')" routerLink="/faq" routerLinkActive="is-active">FAQ</a>
      <a (click)="routeTo('/about')" routerLink="/about" routerLinkActive="is-active">Ãœber uns</a>
      <a (click)="routeTo('/contact')" routerLink="/contact" routerLinkActive="is-active">Kontakt</a>

      <!-- KI Preview (wenn vorhanden) -->
      <a *ngIf="getPreviewAmmount() > 0"
        style="font-weight: 500; background-color: #245ee6; border: 3px solid rgb(0, 84, 210); color: white;"
        (click)="routeTo('/preview')" routerLink="/preview" routerLinkActive="is-active">
        âœ¨ Ki VorschauÃ¼bersicht Ã¶ffnen
      </a>

      <!-- WENN NICHT EINGELOGGT -->
      <ng-container *ngIf="!user">
        <a (click)="routeTo('/login')" routerLink="/login" routerLinkActive="is-active" class="nav-link--highlight">
          Login
        </a>
        <!-- <a (click)="routeTo('/register')" routerLink="/register" routerLinkActive="is-active"
          class="nav-link--secondary">
          Registrieren
        </a> -->
      </ng-container>

      <!-- WENN EINGELOGGT -->
      <ng-container *ngIf="user">
        <!-- Admin Link (nur fÃ¼r Admins) -->
        <a *ngIf="user.role === UserRole.ADMIN" (click)="routeTo('/admin/requests')" routerLink="/admin/requests"
          routerLinkActive="is-active" class="nav-link--admin">
          ðŸ”§ Admin
        </a>

        <!-- User Menu -->
        <div class="user-menu">
          <a (click)="routeTo('/profile')" routerLink="/profile" routerLinkActive="is-active" class="user-menu__link">
            <span class="user-name">Mein Account</span>
          </a>
        </div>

        <!-- Logout Button -->
        <button class="nav-link nav-link--logout" type="button" (click)="logout()">
          Ausloggen
        </button>
      </ng-container>
    </nav>
  </div>

  <!-- Backdrop fÃ¼r Mobile -->
  <button class="backdrop" type="button" aria-hidden="true" *ngIf="open" (click)="toggle()"></button>
</header>