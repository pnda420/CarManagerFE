<!-- src/app/features/cars/cars-overview/cars-overview.component.html -->
<!-- <app-page-title title="Meine Autos"></app-page-title> -->

<section class="cars-page">
    <div class="container">

        <!-- Header Actions -->
        <div class="page-header">
            <div class="header-info">
                <h2>Meine Garage</h2>
                <p>Verwalte deine Fahrzeuge und behalte den Überblick</p>
            </div>
            <button class="btn btn--primary btn--large" (click)="openCreateModal()">
                <span class="material-symbols-outlined">add</span>
                Neues Auto
            </button>
        </div>

        <!-- Loading State -->
        <div class="loading-container" *ngIf="loading && cars.length === 0">
            <div class="spinner"></div>
            <p>Lade Autos...</p>
        </div>

        <!-- Empty State -->
        <div class="empty-state" *ngIf="!loading && cars.length === 0">
            <div class="empty-icon">
                <span class="material-symbols-outlined">directions_car</span>
            </div>
            <h3>Noch keine Autos</h3>
            <p>Füge dein erstes Auto hinzu, um loszulegen!</p>
            <button class="btn btn--primary btn--large" (click)="openCreateModal()">
                <span class="material-symbols-outlined">add</span>
                Erstes Auto hinzufügen
            </button>
        </div>

        <!-- Cars Grid -->
        <div class="cars-grid" *ngIf="!loading && cars.length > 0">
            <div class="car-card" *ngFor="let car of cars">

                <!-- Car Image -->
                <div class="car-image" [style.background-image]="'url(' + getCarMainImage(car) + ')'"
                    (click)="viewCarDetails(car)">
                    <div class="image-overlay">
                        <span class="material-symbols-outlined">visibility</span>
                    </div>
                </div>

                <!-- Car Content -->
                <div class="car-content">
                    <div class="car-header">
                        <h3 class="car-name" (click)="viewCarDetails(car)">{{ car.name }}</h3>
                        <span class="car-subtitle">{{ car.make }} {{ car.model }}</span>
                    </div>

                    <!-- Stats Grid -->
                    <div class="car-stats">
                        <div class="stat" *ngFor="let stat of getCarStats(car)">
                            <span class="material-symbols-outlined stat-icon">{{ stat.icon }}</span>
                            <div class="stat-info">
                                <span class="stat-label">{{ stat.label }}</span>
                                <span class="stat-value">{{ stat.value }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Info -->
                    <div class="car-meta">
                        <div class="meta-item" *ngIf="car.transmission">
                            <span class="material-symbols-outlined">settings</span>
                            <span>{{ getTransmissionLabel(car.transmission) }}</span>
                        </div>
                        <div class="meta-item" *ngIf="car.drivetrain">
                            <span class="material-symbols-outlined">sync_alt</span>
                            <span>{{ getDrivetrainLabel(car.drivetrain) }}</span>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="car-actions">
                        <button class="btn btn--secondary btn--small" (click)="viewCarDetails(car)">
                            <span class="material-symbols-outlined">visibility</span>
                            Details
                        </button>
                        <button class="btn btn--ghost btn--small" (click)="openEditModal(car)">
                            <span class="material-symbols-outlined">edit</span>
                            Bearbeiten
                        </button>
                        <button class="btn btn--danger-ghost btn--small" (click)="deleteCar(car)">
                            <span class="material-symbols-outlined">delete</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>

<!-- Car Form Modal -->
<app-car-form-modal 
    [car]="selectedCar" 
    [show]="showModal" 
    (close)="closeModal()" 
    (success)="onCarSaved($event)">
</app-car-form-modal>