<!-- Preview Banner -->
<aside class="preview-banner" role="banner" aria-label="Vorschauhinweis">
    <div class="preview-banner__inner">
        <div class="preview-banner__info">
            <svg class="preview-banner__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                <path d="M12 8v.01M12 12v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
            <p class="preview-banner__text">
                <strong>Vorschaumodus</strong>
                <span class="muted">Änderungen werden automatisch gespeichert</span>
            </p>
        </div>

        <div class="preview-banner__actions">
            <select id="previewSelect" class="select preview-select" aria-label="Vorschau auswählen"
                (change)="onPreviewChange($event)">
                <option *ngFor="let p of getAllPreviews(); let i = index; trackBy: trackByIndex" [value]="i"
                    [selected]="i === getSelectedIndex()">
                    {{ 'Version ' + (i + 1) + '.0' }}
                </option>
            </select>

            <button class="btn btn--ghost" type="button" (click)="goBack()" aria-label="Zurück zur Übersicht">
                <span aria-hidden="true">←</span> Zurück
            </button>
        </div>
    </div>
</aside>

<!-- Preview Content -->
<div class="preview-host" [style.max-width.px]="getCurrentScreenWidth()" #previewHost role="main"
    aria-label="Vorschau-Inhalt" (click)="blockInteractions($event)" [innerHTML]="sanitizedBody"
    *ngIf="sanitizedBody; else empty">
</div>

<!-- Empty State -->
<ng-template #empty>
    <div class="empty-state">
        <svg class="empty-state__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2" />
            <path d="M9 9l6 6m0-6l-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
        <p class="empty-state__text">Noch keine Vorschau vorhanden</p>
    </div>
</ng-template>