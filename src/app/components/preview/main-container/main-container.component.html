<!-- Preview Banner -->
<aside class="preview-banner" role="banner" aria-label="Vorschauhinweis">
    <div class="preview-banner__inner">
        <div class="preview-banner__info">
            <svg class="preview-banner__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                <path d="M12 8v.01M12 12v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
            <p class="preview-banner__text">
                <strong>Vorschaumodus</strong>
                <span class="muted">{{ getAllPreviews().length }} gespeicherte Seite(n)</span>
            </p>
        </div>

        <div class="preview-banner__actions">
            <select id="previewSelect" class="select preview-select" aria-label="Vorschau auswählen"
                (change)="onPreviewChange($event)" *ngIf="getAllPreviews().length > 0">
                <option *ngFor="let p of getAllPreviews(); let i = index; trackBy: trackByIndex" [value]="i"
                    [selected]="i === getSelectedIndex()">
                    {{ 'Seite ' + (i + 1) }}
                </option>
            </select>

            <button class="btn btn--ghost" type="button" (click)="deleteCurrent()" *ngIf="getAllPreviews().length > 0"
                [disabled]="loading">
                🗑️ Löschen
            </button>

            <button class="btn btn--ghost" type="button" (click)="goBack()" aria-label="Zurück zur Übersicht">
                <span aria-hidden="true">←</span> Zurück
            </button>
        </div>
    </div>
</aside>

<!-- Loading State -->
<div class="loading-state" *ngIf="loading">
    <div class="spinner"></div>
    <p>Lädt Seiten...</p>
</div>

<!-- Preview Content - IFRAME -->
<div class="preview-wrapper" *ngIf="hasContent && !loading">
    <iframe #previewIframe class="preview-iframe" [style.width.px]="getCurrentScreenWidth()" sandbox="allow-same-origin"
        title="Website Vorschau">
    </iframe>
</div>

<!-- Empty State -->
<div class="empty-state" *ngIf="!hasContent && !loading && getAllPreviews().length === 0">
    <svg class="empty-state__icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2" />
        <path d="M9 9l6 6m0-6l-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
    </svg>
    <p class="empty-state__text">Noch keine Seiten erstellt</p>
    <button class="btn btn--primary" (click)="goBack()">Jetzt erstellen</button>
</div>