<app-page-title title="FAQ"></app-page-title>

<section class="faq">
  <div class="container">
    
    <!-- Intro -->
    <div class="faq-intro">
      <h2>Häufige Fragen</h2>
      <p>Kurze, ehrliche Antworten. Wenn etwas fehlt, melden Sie sich.</p>

      <!-- Search & Tools -->
      <div class="faq-tools">
        <div class="search-wrapper">
          <span class="search-icon material-symbols-outlined">search</span>
          <input type="search" 
                 [(ngModel)]="q" 
                 placeholder="In Fragen suchen..."
                 aria-label="FAQ durchsuchen" />
        </div>
        <div class="tool-buttons">
          <button class="btn btn--ghost" type="button" (click)="setAll(true)">
            <span class="material-symbols-outlined ms-size-20">unfold_more</span>
            Alle öffnen
          </button>
          <button class="btn btn--ghost" type="button" (click)="setAll(false)">
            <span class="material-symbols-outlined ms-size-20">unfold_less</span>
            Alle schließen
          </button>
        </div>
      </div>
    </div>

    <!-- FAQ List -->
    <div class="faq-list" *ngIf="filtered.length; else nohits">
      <details class="faq-item" 
               *ngFor="let f of filtered; trackBy: trackById" 
               [attr.open]="expandAll ? '' : null">
        <summary>
          <span class="faq-icon material-symbols-outlined">help</span>
          <span class="faq-question">{{ f.q }}</span>
          <span class="faq-arrow material-symbols-outlined">expand_more</span>
        </summary>
        <div class="faq-answer">
          <p *ngFor="let p of f.a">{{ p }}</p>
          <ul *ngIf="f.list?.length">
            <li *ngFor="let li of f.list">{{ li }}</li>
          </ul>
        </div>
      </details>
    </div>

    <!-- No Results -->
    <ng-template #nohits>
      <div class="faq-nohits">
        <div class="nohits-icon">
          <span class="material-symbols-outlined">search_off</span>
        </div>
        <p>
          Keine Treffer gefunden. 
          <a (click)="router.navigate(['/contact'])">Stelle uns deine Frage direkt</a>
        </p>
      </div>
    </ng-template>

    <!-- CTA -->
    <div class="faq-cta">
      <div class="cta-card">
        <div class="cta-icon">
          <span class="material-symbols-outlined ms-fill">contact_support</span>
        </div>
        <h3>Nicht fündig geworden?</h3>
        <p>Kurzes Erstgespräch, klare Einschätzung, kein Sales-Druck.</p>
        <button class="btn btn--primary btn--large" (click)="router.navigate(['/contact'])">
          <span class="material-symbols-outlined ms-size-20">send</span>
          Frage stellen
        </button>
      </div>
    </div>

  </div>
</section>
