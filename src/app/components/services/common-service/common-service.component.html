<!-- common-service.component.html -->
<app-page-title [title]="config?.pageTitle || ''"></app-page-title>

<section class="service-detail" *ngIf="config">

    <!-- HERO - Dramatic Entry -->
    <div class="hero">
        <div class="container">
            <!-- Animated Badge -->
            <div class="hero-badge animate-badge" [ngClass]="{
                   'badge-star': config.hero.badge.variant === 'star',
                   'badge-premium': config.hero.badge.variant === 'premium'
                 }">
                <span *ngIf="config.hero.badge.icon !== 'star'">{{ config.hero.badge.icon }}</span>
                <span *ngIf="config.hero.badge.icon === 'star'"
                    class="material-symbols-outlined ms-size-18 ms-fill">star</span>
                {{ config.hero.badge.text }}
            </div>

            <!-- Title with gradient animation -->
            <h1 class="animate-title" [innerHTML]="config.hero.title"></h1>
            <p class="hero-desc animate-desc" [innerHTML]="config.hero.description"></p>

            <!-- Facts with staggered animation -->
            <div class="facts">
                <div class="fact fact-primary animate-fact" style="animation-delay: 0.1s">
                    <span class="material-symbols-outlined ms-fill">payments</span>
                    <span>{{ config.hero.facts.price }}</span>
                </div>
                <div class="fact animate-fact" style="animation-delay: 0.2s">
                    <span class="material-symbols-outlined">schedule</span>
                    <span>{{ config.hero.facts.timeline }}</span>
                </div>
                <div class="fact animate-fact" style="animation-delay: 0.3s">
                    <span class="material-symbols-outlined ms-fill">check_circle</span>
                    <span>{{ config.hero.facts.highlight }}</span>
                </div>
            </div>

            <!-- CTAs with pulse animation -->
            <div class="hero-cta">
                <button class="btn btn--primary btn--large animate-cta" style="animation-delay: 0.4s"
                    (click)="router.navigate(['/contact'])">
                    <span>Jetzt anfragen</span>
                    <span class="material-symbols-outlined ms-size-20 btn-icon">arrow_forward</span>
                </button>
                <button class="btn btn--secondary btn--large animate-cta" style="animation-delay: 0.5s"
                    (click)="router.navigate(['/preview-form'])">
                    <span class="material-symbols-outlined ms-size-20">visibility</span>
                    <span>Gratis Vorschau</span>
                </button>
            </div>

            <!-- Scroll Indicator -->
            <div class="scroll-indicator animate-bounce">
                <span class="material-symbols-outlined">expand_more</span>
            </div>
        </div>
    </div>

    <!-- QUICK FIT - Magnetic Cards -->
    <div class="quick-fit">
        <div class="container">
            <h2 class="section-title slide-in-view">
                <span class="title-highlight">Passt das f√ºr dich?</span>
            </h2>

            <div class="fit-grid">
                <!-- YES Card -->
                <div class="fit-card fit-yes slide-in-view" style="animation-delay: 0.1s">
                    <div class="fit-icon-wrapper">
                        <div class="fit-icon">
                            <span class="material-symbols-outlined ms-fill icon-check">check_circle</span>
                        </div>
                        <div class="icon-glow"></div>
                    </div>
                    <div class="fit-content">
                        <h3>
                            <span class="emoji-wave">üëç</span>
                            Ja, wenn du...
                        </h3>
                        <ul class="fit-list">
                            <li *ngFor="let item of config.fit.good.items; let i = index" class="list-item-fade"
                                [style.animation-delay.s]="0.1 + (i * 0.05)">
                                <span class="check-icon">
                                    <span class="material-symbols-outlined ms-fill">check</span>
                                </span>
                                <span [innerHTML]="item"></span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- NO Card -->
                <div class="fit-card fit-no slide-in-view" style="animation-delay: 0.2s">
                    <div class="fit-icon-wrapper">
                        <div class="fit-icon">
                            <span class="material-symbols-outlined ms-fill icon-warn">cancel</span>
                        </div>
                        <div class="icon-glow"></div>
                    </div>
                    <div class="fit-content">
                        <h3>
                            <span class="emoji-wave">‚ö†Ô∏è</span>
                            Nicht geeignet bei...
                        </h3>
                        <ul class="fit-list">
                            <li *ngFor="let item of config.fit.warning.items; let i = index" class="list-item-fade"
                                [style.animation-delay.s]="0.1 + (i * 0.05)">
                                <span class="check-icon">
                                    <span class="material-symbols-outlined">close</span>
                                </span>
                                <span [innerHTML]="item"></span>
                            </li>
                        </ul>
                        <div class="fit-alt" *ngIf="config.fit.warning.note">
                            <span class="material-symbols-outlined">lightbulb</span>
                            <span [innerHTML]="config.fit.warning.note"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- COMPARISON - Nur bei Standard/Premium -->
    <div class="comparison-section" *ngIf="config.infoBox?.type === 'comparison'">
        <div class="container">
            <div class="comparison-box slide-in-view">
                <div class="comp-icon-wrapper">
                    <div class="comp-icon">
                        <span class="material-symbols-outlined icon-spin">compare_arrows</span>
                    </div>
                </div>
                <h2>{{ config.infoBox!.title }}</h2>
                <div class="comp-grid">
                    <div class="comp-card" *ngFor="let item of config.infoBox!.items; let i = index"
                        [class.comp-highlight]="item.highlight" [style.animation-delay.s]="0.1 + (i * 0.1)">
                        <div class="comp-badge" *ngIf="item.highlight">
                            <span class="material-symbols-outlined ms-size-16">arrow_back</span>
                            <span>Das hier</span>
                        </div>
                        <h4>{{ item.title }}</h4>
                        <ul>
                            <li *ngFor="let feature of item.features; let j = index" class="list-item-pop"
                                [style.animation-delay.s]="0.1 + (j * 0.05)">
                                {{ feature }}
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- USE CASES - Nur Individual -->
    <div class="use-cases-section" *ngIf="config.useCases">
        <div class="container">
            <h2 class="section-title slide-in-view">
                <span class="title-highlight">Was andere damit machen</span>
            </h2>
            <div class="use-cases-grid">
                <div class="use-case hover-lift" *ngFor="let uc of config.useCases; let i = index"
                    [style.animation-delay.s]="0.1 + (i * 0.1)">
                    <div class="uc-icon-wrapper">
                        <div class="uc-icon">{{ uc.icon }}</div>
                        <div class="icon-bg"></div>
                    </div>
                    <h4>{{ uc.title }}</h4>
                    <p>{{ uc.description }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- TECH STACK - Nur Individual -->
    <div class="tech-section" *ngIf="config.techStack">
        <div class="container">
            <h2 class="section-title slide-in-view">
                <span class="title-highlight">Tech-Stack</span>
            </h2>
            <div class="tech-grid">
                <div class="tech-category slide-in-view" *ngFor="let cat of config.techStack; let i = index"
                    [style.animation-delay.s]="0.1 + (i * 0.1)">
                    <h4>{{ cat.category }}</h4>
                    <div class="tech-badges">
                        <span class="tech-badge badge-pop" *ngFor="let tech of cat.technologies; let j = index"
                            [style.animation-delay.s]="0.1 + (j * 0.05)">
                            {{ tech }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- INCLUDES -->
    <div class="includes-section">
        <div class="container">
            <h2 class="section-title slide-in-view">
                <span class="title-highlight">Was du bekommst</span>
            </h2>
            <div class="includes-grid">
                <div class="include-item hover-lift" *ngFor="let item of config.includes; let i = index"
                    [style.animation-delay.s]="(i * 0.05)">
                    <div class="include-check">
                        <span class="material-symbols-outlined ms-fill check-bounce">check</span>
                    </div>
                    <div class="include-content">
                        <h4 [innerHTML]="item.title"></h4>
                        <p>{{ item.text }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PROCESS -->
    <div class="process-section">
        <div class="container">
            <h2 class="section-title slide-in-view">
                <span class="title-highlight">So l√§uft's</span>
            </h2>
            <div class="process-grid">
                <div class="process-step hover-lift" *ngFor="let step of config.process; let i = index"
                    [style.animation-delay.s]="0.1 + (i * 0.1)">
                    <div class="step-num-wrapper">
                        <div class="step-num">{{ step.number }}</div>
                        <div class="step-pulse"></div>
                    </div>
                    <div class="step-content">
                        <h4>{{ step.title }}</h4>
                        <p>{{ step.description }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ -->
    <div class="faq-section">
        <div class="container">
            <h2 class="section-title slide-in-view">
                <span class="title-highlight">H√§ufige Fragen</span>
            </h2>
            <div class="faq-list">
                <details class="faq-item slide-in-view" *ngFor="let item of config.faq; let i = index"
                    [style.animation-delay.s]="0.05 + (i * 0.05)">
                    <summary>
                        <span class="faq-icon">
                            <span class="material-symbols-outlined">help</span>
                        </span>
                        <span class="faq-q">{{ item.q }}</span>
                        <span class="material-symbols-outlined faq-arrow">expand_more</span>
                    </summary>
                    <div class="faq-answer">
                        <p *ngFor="let answer of item.a">{{ answer }}</p>
                    </div>
                </details>
            </div>
        </div>
    </div>

    <!-- FINAL CTA - Floating + Sticky -->
    <div class="final-cta">
        <div class="container">
            <div class="cta-card">
                <div class="cta-icon">
                    <span class="material-symbols-outlined ms-fill icon-pulse">rocket_launch</span>
                    <div class="icon-rings">
                        <div class="ring ring-1"></div>
                        <div class="ring ring-2"></div>
                        <div class="ring ring-3"></div>
                    </div>
                </div>
                <div class="cta-text">
                    <h3>{{ config.cta.title }}</h3>
                    <p>{{ config.cta.description }}</p>
                </div>
                <div class="cta-actions">
                    <button class="btn btn--primary btn--large btn-glow" (click)="router.navigate(['/contact'])">
                        <span>Gespr√§ch buchen</span>
                        <span class="material-symbols-outlined ms-size-20 btn-icon">arrow_forward</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

</section>